(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{231:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"内置插件的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内置插件的使用","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("H2Icon"),t._v(" 内置插件的使用")],1),t._v(" "),a("p",[t._v("在"),a("router-link",{attrs:{to:"./plugin.html"}},[t._v("插件")]),t._v("一节中，我们详细的阐明了 Lin 插件的机制和规范。在 Lin 的基础库中其实已经默认的集成了两个插件，它们分别是 logger 和 notify。")],1),t._v(" "),t._m(0),t._v(" "),a("p",[t._v("在诸多 CMS 系统中，权限被分配给用户后，那么就代表这一用户拥有某个权限的绝对控制权。但是有些权限又比较危险，比如删除所有图书这个权限，它很可能直接清除了系统里面的所有图书数据，这显然是一个危险的操作。那么这么危险的操作，如果发生了，作为管理员你该怎么办了。很简单，找到该用户，并禁用该用户，随后联系开发者，恢复数据。")]),t._v(" "),a("p",[t._v("logger 插件主要用来解决这一类的问题，当然你可以将记录任何你觉得敏感的操作，比如某用户访问了某私密数据。接下来，我们来实操一下 logger 插件的使用。")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),a("p",[t._v("此时，你每请求一次这个 API，它就会在数据中写下下面类似的信息（请注意，这个 API 现在请求必须登陆）。")]),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._v(" "),a("p",[t._v("这一切取决于你的需求，关于 user 的所有属性，请阅读 user_model 中的所有属性，response 和 request 的所有属性，请阅读"),a("a",{attrs:{href:"http://flask.pocoo.org/docs/1.0/api/#response-objects",target:"_blank",rel:"noopener noreferrer"}},[t._v("Response"),a("OutboundLink")],1),t._v("，"),a("a",{attrs:{href:"http://flask.pocoo.org/docs/1.0/api/#incoming-request-data",target:"_blank",rel:"noopener noreferrer"}},[t._v("Request"),a("OutboundLink")],1),t._v("。")]),t._v(" "),t._m(9),t._v(" "),a("p",[t._v("notify 是一种消息推送的解决方案，它基于 SSE（Server Sent Events）,关于 SSE 你可以简单的理解为它是一种类 Websocket 的通信方式，\n具体细节请你阅读"),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Server-sent_events/EventSource",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN 官网"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("notify 插件主要用来解决服务器向前端推送消息，例如当购物小程序中，某用户配送一件商品，这是服务器向 CMS 前端推送该消息，然后管理员看到消息通知配送员配送。\n接下来，我们来实操一下 notify 插件的使用。")]),t._v(" "),t._m(10),t._v(" "),t._m(11),t._m(12),t._v(" "),a("p",[t._v("你可能会奇怪，为什么需要多加一个 event 参数，因为对于 CMS 来说，管理员需要决定某些用户可接受的推送消息，有一些消息只能推送到某些人。因此请开发者你谨慎使用 event 这个属性，因为有些推送消息不能让某些人知道。")]),t._v(" "),t._m(13),t._v(" "),a("RightMenu")],1)},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"logger-插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logger-插件","aria-hidden":"true"}},[this._v("#")]),this._v(" logger 插件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我们修改"),s("code",[this._v("get_book")]),this._v("这个视图函数为：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lin"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logger"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Logger\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 省略诸多代码")]),t._v("\n@book_api"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'/<id>'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" methods"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'GET'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@Logger"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'某用户查询了一本图书'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("# 推送的消息")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("get_book")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token builtin"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    book "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Book"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter_by"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token builtin"}},[t._v("id")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token builtin"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" book "),a("span",{attrs:{class:"token keyword"}},[t._v("is")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("None")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("raise")]),t._v(" NotFound"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'没有找到相关书籍'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" jsonify"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("book"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("接下来，当有任何用户请求这个 API 时，均会在数据库中写入一条日志信息。该日志信息的数据模型的定义在"),s("code",[this._v("lin.plugins.logger.app.model")]),this._v("中，对应的数据表名为"),s("code",[this._v("lin_log")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("但有时，"),a("em",[t._v("某用户查询了一本图书")]),t._v("这样的信息未免显得太过于单薄，它无法很好的向前端说明更多的信息。因此 Lin 提供了一个简单的模板语法，你可以在"),a("code",[t._v("template")]),t._v("这个参数中，写入一些变量，如"),a("code",[t._v("{user.nickname}查询了一本图书")]),t._v("，请记住每一个"),a("code",[t._v("{}")]),t._v("中就可以写入一个变量，"),a("code",[t._v("user.nickname")]),t._v("就表示当前用户的昵称。如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lin"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logger"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Logger\n"),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lin "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" route_meta"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" group_required"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" login_required\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 省略诸多代码")]),t._v("\n@book_api"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'/<id>'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" methods"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'GET'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@Logger"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'{user.nickname}查询了一本图书'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("# 推送的消息")]),t._v("\n@login_required "),a("span",{attrs:{class:"token comment"}},[t._v("# 必须，如果用户不登陆，就没有user这个实例")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("get_book")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token builtin"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    book "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Book"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter_by"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token builtin"}},[t._v("id")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token builtin"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" book "),a("span",{attrs:{class:"token keyword"}},[t._v("is")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("None")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("raise")]),t._v(" NotFound"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'没有找到相关书籍'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" jsonify"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("book"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("+----+---------------------+---------------------+---------+-----------+-------------+--------+------------+-----------+\n"),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("id")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" message             "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("time")]),t._v("                "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" user_id "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" user_name "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" status_code "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" method "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" path       "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" authority "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+----+---------------------+---------------------+---------+-----------+-------------+--------+------------+-----------+\n"),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("  1 "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" pedro查询了一本图书 "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" 2018-10-24 18:11:40 "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("       4 "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" pedro     "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("         200 "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" GET    "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" /v1/book/1 "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("           "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+----+---------------------+---------------------+---------+-----------+-------------+--------+------------+-----------+\n1 row "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0.13 sec"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我们的模板语法，不仅仅可以在其中嵌入"),s("code",[this._v("user")]),this._v("这个实例，你还可以嵌入 Flask Response 的任何属性，如："),s("code",[this._v("response.status")]),this._v("，还有 Flask Request 的诸多属性，如"),s("code",[this._v("request.url")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",[t._v("name")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("说明")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("类型")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("user")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("user_model 实例")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("object")])]),t._v(" "),a("tr",[a("td",[t._v("response")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Flask Response 实例")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("object")])]),t._v(" "),a("tr",[a("td",[t._v("request")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Flask Request 实例")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("object")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"notify-插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#notify-插件","aria-hidden":"true"}},[this._v("#")]),this._v(" notify 插件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我们再次修改"),s("code",[this._v("get_book")]),this._v("这个视图函数为：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lin"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logger"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Logger\n"),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lin"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("notify"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("notify "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Notify\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 省略代码。。。")]),t._v("\n@book_api"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'/<id>'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" methods"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'GET'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@Logger"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'{user.nickname}查询了一本图书'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n@Notify"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'{user.nickname}查询了一本图书'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'queryBook'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("# template与Logger的template的用法一样，但必须多传入一个参数event")]),t._v("\n@login_required\n"),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("get_book")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token builtin"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    book "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Book"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter_by"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token builtin"}},[t._v("id")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token builtin"}},[t._v("id")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" book "),a("span",{attrs:{class:"token keyword"}},[t._v("is")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("None")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("raise")]),t._v(" NotFound"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'没有找到相关书籍'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" jsonify"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("book"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 Notify 的构造函数中你可以传入诸多参数，其中"),s("code",[this._v("template")]),this._v("与"),s("code",[this._v("event")]),this._v("为必传，template 的用法与 Logger 的 template 用法完全一致，而 event 为当前推送事件的名称。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("接下来，当任何用户访问该 API 时，CMS 前端便可以接受到一条推送消息，关于真正的实现效果，"),s("a",{attrs:{href:""}},[this._v("参考")]),this._v("。")])}],!1,null,null,null);s.default=e.exports}}]);