<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="referrer" content="never">
    <title>快速开始</title>
    <meta name="description" content="兽人永不为奴~~~除非包吃又包住～～～">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.32b66682.css" as="style"><link rel="preload" href="/assets/js/app.da981d75.js" as="script"><link rel="preload" href="/assets/js/30.c6a75514.js" as="script"><link rel="prefetch" href="/assets/js/20.92fe233b.js"><link rel="prefetch" href="/assets/js/2.d62d4ff9.js"><link rel="prefetch" href="/assets/js/3.802dab0f.js"><link rel="prefetch" href="/assets/js/4.dbcc2adb.js"><link rel="prefetch" href="/assets/js/5.4adea544.js"><link rel="prefetch" href="/assets/js/6.58de709a.js"><link rel="prefetch" href="/assets/js/7.a5a75c7e.js"><link rel="prefetch" href="/assets/js/8.7f2e495a.js"><link rel="prefetch" href="/assets/js/9.1291fa0e.js"><link rel="prefetch" href="/assets/js/10.2fabea8f.js"><link rel="prefetch" href="/assets/js/11.bb28ef39.js"><link rel="prefetch" href="/assets/js/12.6df783fa.js"><link rel="prefetch" href="/assets/js/13.1ebc8083.js"><link rel="prefetch" href="/assets/js/14.a5cf6b63.js"><link rel="prefetch" href="/assets/js/15.b663dbf0.js"><link rel="prefetch" href="/assets/js/16.efe0a9a7.js"><link rel="prefetch" href="/assets/js/17.4697c9db.js"><link rel="prefetch" href="/assets/js/18.babd3f94.js"><link rel="prefetch" href="/assets/js/19.3168d3d7.js"><link rel="prefetch" href="/assets/js/21.116e62cc.js"><link rel="prefetch" href="/assets/js/22.c1a16a7c.js"><link rel="prefetch" href="/assets/js/23.a1aed0ac.js"><link rel="prefetch" href="/assets/js/24.b0a62875.js"><link rel="prefetch" href="/assets/js/25.3ad846cd.js"><link rel="prefetch" href="/assets/js/26.4cdf21f1.js"><link rel="prefetch" href="/assets/js/27.9aad70b3.js"><link rel="prefetch" href="/assets/js/28.6159bc67.js"><link rel="prefetch" href="/assets/js/29.f3205a01.js"><link rel="prefetch" href="/assets/js/31.5d35c295.js"><link rel="prefetch" href="/assets/js/32.e8a88456.js"><link rel="prefetch" href="/assets/js/33.5763d28a.js"><link rel="prefetch" href="/assets/js/34.eef6dff6.js"><link rel="prefetch" href="/assets/js/35.c55b1d53.js"><link rel="prefetch" href="/assets/js/36.04ec4e4f.js"><link rel="prefetch" href="/assets/js/37.1445889e.js"><link rel="prefetch" href="/assets/js/38.c2369325.js"><link rel="prefetch" href="/assets/js/39.591d4a7a.js"><link rel="prefetch" href="/assets/js/40.8b2243c5.js"><link rel="prefetch" href="/assets/js/41.bd7ec86f.js"><link rel="prefetch" href="/assets/js/42.9aa2497b.js"><link rel="prefetch" href="/assets/js/43.70b2f705.js"><link rel="prefetch" href="/assets/js/44.e72dad09.js"><link rel="prefetch" href="/assets/js/45.0c0cf019.js"><link rel="prefetch" href="/assets/js/46.36fe7f81.js"><link rel="prefetch" href="/assets/js/47.5966ce65.js"><link rel="prefetch" href="/assets/js/48.44fd153d.js"><link rel="prefetch" href="/assets/js/49.4c65524f.js"><link rel="prefetch" href="/assets/js/50.e9e1beef.js"><link rel="prefetch" href="/assets/js/51.f67e5993.js"><link rel="prefetch" href="/assets/js/52.51f3a2dd.js"><link rel="prefetch" href="/assets/js/53.25eec254.js"><link rel="prefetch" href="/assets/js/54.3cb3da5d.js"><link rel="prefetch" href="/assets/js/55.659c7163.js"><link rel="prefetch" href="/assets/js/56.658cee8e.js"><link rel="prefetch" href="/assets/js/57.6b9778d2.js"><link rel="prefetch" href="/assets/js/58.37b95470.js"><link rel="prefetch" href="/assets/js/59.de5ddd5f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.32b66682.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" style="position:relative;"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <div class="home-link router-link-active"><img src="/left-logo.png" alt="" class="logo"> <!----></div> <div class="search" style="max-width:-300px;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" placeholder="请输入组件名称" value=""> <!----></div></div> <div class="links" style="max-width:-300px;"><nav class="nav-links can-hide"><div class="nav-item"><a href="/front/git/doc.html" class="nav-link">大前端</a></div><div class="nav-item"><a href="/note/01.html" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/about.html" class="nav-link">关于</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front/git/doc.html" class="nav-link">大前端</a></div><div class="nav-item"><a href="/note/01.html" class="nav-link">读书笔记</a></div><div class="nav-item"><a href="/about.html" class="nav-link">关于</a></div> <!----></nav> <!----></div> <div id="area" class="page"> <div class="content"><h2 id="快速开始"><a href="#快速开始" aria-hidden="true" class="header-anchor">#</a> 快速开始</h2> <p>Power 的使用十分简单，只需要几个简单的配置和初始化便可拥有一个方便的 CMS 权限管理系统。</p> <h3 id="准备"><a href="#准备" aria-hidden="true" class="header-anchor">#</a> 准备</h3> <p>Power 是一套基于 Flask 的权限系统，另外它也依赖 flask_sqlalchemy（数据库 ORM 框架）和 flask_jwt_extended（jwt 机制）进行数据存储和权限认证。</p> <p>使用 Power 前请确定安装好了依赖。</p> <h3 id="初始化"><a href="#初始化" aria-hidden="true" class="header-anchor">#</a> 初始化</h3> <ol><li>我们需要导入 Power 这个类，它控制这整个权限系统。</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 1. 导入依赖</span>
<span class="token keyword">from</span> power<span class="token punctuation">.</span>core <span class="token keyword">import</span> Power

<span class="token comment"># 2. 初始化</span>
<span class="token keyword">def</span> <span class="token function">apply_power</span><span class="token punctuation">(</span>app<span class="token punctuation">:</span> Flask<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># create_all 创建必要的权限表</span>
    <span class="token builtin">pow</span> <span class="token operator">=</span> Power<span class="token punctuation">(</span>app<span class="token punctuation">,</span> create_all<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>实例化 Power，指定参数<code>create_all</code>为<em>True</em>,它会默认在数据库中创建几个所必须的表格。</li></ol> <h3 id="配置"><a href="#配置" aria-hidden="true" class="header-anchor">#</a> 配置</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 设置数据库</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'SQLALCHEMY_DATABASE_URI'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'sqlite:///'</span> <span class="token operator">+</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>basedir<span class="token punctuation">,</span> <span class="token string">'test.db'</span><span class="token punctuation">)</span>
<span class="token comment"># 设置token的过期时间为1天</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'JWT_ACCESS_TOKEN_EXPIRES'</span><span class="token punctuation">]</span> <span class="token operator">=</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment"># 开启DEBUG模式</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'DEBUG'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
<span class="token comment"># 设置secret_key，非常重要！！！不可泄密！！！</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'SECRET_KEY'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'hello*world-from+pedro'</span>
</code></pre></div><h3 id="开始"><a href="#开始" aria-hidden="true" class="header-anchor">#</a> 开始</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    apply_power<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>port<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">)</span>
</code></pre></div><p>这样就能开启一个好用的 CMS 权限管理系统了。</p> <h3 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h3> <p>Power 的定位是开箱即用，内置用户登陆、注册，权限管理，日志记录等接口。</p> <ol><li>首先，我们定义一个路由函数：</li></ol> <div class="language-py extra-class"><pre class="language-py"><code>@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">'hello'</span><span class="token punctuation">:</span> <span class="token string">'primer'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>然后，我们通过浏览器打开<code>http://127.0.0.1:5000/</code>，便可以看到如下结果：</p> <p><img src="data:image/png;base64,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" alt></p> <ol start="2"><li>上述为一个最基本的视图函数，没有任何授权机制，而 Power 主要用来解决视图函数（即 API 接口）的控制。我们需要注册一个用户。打开 postman 或其它工具，在地址栏中输入<code>http://127.0.0.1:5000/user/register</code>,其中<em>http://127.0.0.1:5000</em>是 Flask 默认监听的本地端口。然后用<strong>post</strong>方法创建一个用户数据。请求输入如下：</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;nickname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pedro&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;confirm_password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1312342604@qq.com&quot;</span> // 注意，email为可选项
<span class="token punctuation">}</span>
</code></pre></div><p>如果一切顺利，我们会得到如下结果：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;error_code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;用户创建成功&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;POST  /user/register&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结果告诉我们，请求成功了。完整截图如下：</p> <p><img src="/assets/img/res2.f488bd4d.png" alt></p> <ol start="3"><li>接下来，我们需要给<code>home</code>这个视图函数加上一定的权限，如<code>login_required</code>:</li></ol> <div class="language-py extra-class"><pre class="language-py"><code>@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
@login_required
<span class="token keyword">def</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">'hello'</span><span class="token punctuation">:</span> <span class="token string">'primer'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>然后，我们再在浏览器中访问<code>http://127.0.0.1:5000/</code>，发现结果是这样的：</p> <p><img src="data:image/png;base64,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" alt></p> <p>很明显，我们失败了，返回信息告诉我们，我们没有权限。那么如何获得这个权限了？</p> <p>很简单，通过登陆获取 token，然后再次访问该接口。</p> <p>在 postman 的地址栏中输入<code>http://127.0.0.1:5000/user/login</code>，选择方法为<code>post</code>，并填入下面参数：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;nickname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pedro&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意：上面为刚注册用户的昵称和密码！！！</p> <p>如果顺利，我们会得到下面结果：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;access_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1MzU2ODk1NjksIm5iZiI6MTUzNTY4OTU2OSwianRpIjoiMTY4YjQxMzEtZmViZi00MGI0LWJiNDEtNGY4NDE0YjU2N2Q0IiwiZXhwIjoxNTM1Nzc1OTY5LCJpZGVudGl0eSI6InBlZHJvIiwiZnJlc2giOmZhbHNlLCJ0eXBlIjoiYWNjZXNzIn0.8kALcljzvTeBhgN0A8JZYvZTpQuXmh43si3wsmit2aY&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refresh_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1MzU2ODk1NjksIm5iZiI6MTUzNTY4OTU2OSwianRpIjoiYzk4ZTEzNGUtMDVhZi00NDg4LThhN2EtNWE2ODcyNzY5NmRiIiwiZXhwIjoxNTM4MjgxNTY5LCJpZGVudGl0eSI6InBlZHJvIiwidHlwZSI6InJlZnJlc2gifQ.VRqXM-p5r8hS1Gwss8SQVqmED-lqHcOOaJNlDADyBYk&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>结果为两个非常重要的 token 值，有关于 jwt 和 token 的使用，请参考<a href="/lin/inside/jwt.html">jwt</a>。</p> <p>得到<strong>access_token</strong>后，我们在请求头 header 中加入<strong>Authorization</strong>字段，值为:</p> <div class="language-bash extra-class"><pre class="language-bash"><code> Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1MzU2ODk1NjksIm5iZiI6MTUzNTY4OTU2OSwianRpIjoiMTY4YjQxMzEtZmViZi00MGI0LWJiNDEtNGY4NDE0YjU2N2Q0IiwiZXhwIjoxNTM1Nzc1OTY5LCJpZGVudGl0eSI6InBlZHJvIiwiZnJlc2giOmZhbHNlLCJ0eXBlIjoiYWNjZXNzIn0.8kALcljzvTeBhgN0A8JZYvZTpQuXmh43si3wsmit2aY
</code></pre></div><p>然后发送请求，便可以得到正确的返回信息了。</p> <ol start="4"><li><code>login_required</code>主要用来保护<strong>普通用户</strong>的默认权限，即当用户注册登陆后就有的权限。但有些权限只针对超级管理员而言，如查看其它用户的日志信息，则我们需要更改该视图函数的权限位。如使用<code>admin_required</code>，表示当前接口只能由超级管理员访问。</li></ol> <div class="language-py extra-class"><pre class="language-py"><code>@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
@admin_required
<span class="token keyword">def</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">'hello'</span><span class="token punctuation">:</span> <span class="token string">'primer'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>而后，我们再次访问该接口，得到如下结果：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;error_code&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;只有超级管理员可操作&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GET  /&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>第三种权限位：<code>group_required</code>，group_required 是一种非常灵活的权限位，它通过数据库中的用户和权限组的关系来判断当前用户是否具有访问权限，我们将在下一节中详细讲解。</li></ol> <h3 id="全部代码"><a href="#全部代码" aria-hidden="true" class="header-anchor">#</a> 全部代码</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> os
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> jsonify
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> timedelta
<span class="token keyword">from</span> power<span class="token punctuation">.</span>core <span class="token keyword">import</span> Power<span class="token punctuation">,</span> route_meta
<span class="token keyword">from</span> power<span class="token punctuation">.</span>jwt <span class="token keyword">import</span> login_required<span class="token punctuation">,</span>admin_required<span class="token punctuation">,</span>group_required

<span class="token comment"># 获得当前工作目录文件夹的绝对路径</span>
basedir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span>

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'SQLALCHEMY_DATABASE_URI'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'sqlite:///'</span> <span class="token operator">+</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>basedir<span class="token punctuation">,</span> <span class="token string">'test.db'</span><span class="token punctuation">)</span>
<span class="token comment"># 设置token的过期时间为1天</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'JWT_ACCESS_TOKEN_EXPIRES'</span><span class="token punctuation">]</span> <span class="token operator">=</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'DEBUG'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
<span class="token comment"># 设置secret_key，非常重要！！！不可泄密！！！</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'SECRET_KEY'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'hello*world-from+pedro'</span>


<span class="token keyword">def</span> <span class="token function">apply_power</span><span class="token punctuation">(</span>app<span class="token punctuation">:</span> Flask<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># create_all 创建必要的权限表</span>
    <span class="token builtin">pow</span> <span class="token operator">=</span> Power<span class="token punctuation">(</span>app<span class="token punctuation">,</span> create_all<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token comment"># info = pow.manager.ep_meta.get('static')</span>


@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
@route_meta<span class="token punctuation">(</span>auth<span class="token operator">=</span><span class="token string">'common'</span><span class="token punctuation">,</span> module<span class="token operator">=</span><span class="token string">'主页'</span><span class="token punctuation">)</span>
@admin_required
<span class="token keyword">def</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">'hello'</span><span class="token punctuation">:</span> <span class="token string">'primer'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    apply_power<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>port<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">)</span>
</code></pre></div><p>注意：<code>@route_meta(auth='common', module='主页')</code>中的 route_meta 是跟 group_required 相互配合使用的两个装饰器，其作用在下一节中讲到。</p></div> <div class="page-edit"><!----> <!----></div> <!----> <div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div> <!----> <img src="" style="position:absolute;width:135px;left:calc(100% / 2 + 50px);bottom:10px;transform:translateX(-50%);"></div></div>
    <script src="/assets/js/30.c6a75514.js" defer></script><script src="/assets/js/app.da981d75.js" defer></script>
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?c3446600de53c605ba4f6c792e47dff9";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  </body>
</html>
